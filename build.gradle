allprojects {
    version = '1.0.0'
    
    repositories {
        mavenCentral()
    }

    apply plugin: 'java'
    apply plugin: 'maven-publish'

    dependencies {
        compile 'com.eclipsesource.minimal-json:minimal-json:0.9.5'        
    }
}

subprojects {
   dependencies {
     compile rootProject
   }
}

task dist(type: Jar) {
    description = 'Generate fatjar for IMC API'
    group = 'Distribution'
    from {configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
    with jar
    destinationDir = new java.io.File("$rootDir/dist")
}

clean {
    delete fileTree(dir: 'dist' , include: '**/*.jar')
}

task sourcesJar(type: Jar) {
    from sourceSets.main.allJava
}

publishing {
    publications {
        maven(MavenPublication) {
            groupId = 'pt.lsts.imc4j'
            artifactId = 'core'
            version = '1.0.0'

            from components.java
        }
    }
}